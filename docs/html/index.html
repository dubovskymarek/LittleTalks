<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LittleTalks: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LittleTalks
   &#160;<span id="projectnumber">0.5.0</span>
   </div>
   <div id="projectbrief">Tiny P2P communication library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">LittleTalks Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>LittleTalks is very tiny comunication library based on UDP and it's inspirated MQTT protocol. Instead MQTT it's designed as P2P communication in local network.</p>
<p>This library is portable writed in c language. Library centralises all UDP implementation in LTPlatformAdapter.c file, that can be overriden to optional platform. LittleTalks was created for startup canny.tech, where was used on both sides (application and device).</p>
<p><b>Building from source</b> On Windows and Mac, use cmake to build. On other platforms, just run make to build.</p>
<p><b>Credits</b> LittleTalks was written by Marek Dubovsky <a href="#" onclick="location.href='mai'+'lto:'+'dub'+'ov'+'sky'+'ma'+'rek'+'@i'+'clo'+'ud'+'.co'+'m'; return false;">dubov<span style="display: none;">.nosp@m.</span>skym<span style="display: none;">.nosp@m.</span>arek@<span style="display: none;">.nosp@m.</span>iclo<span style="display: none;">.nosp@m.</span>ud.co<span style="display: none;">.nosp@m.</span>m</a></p>
<p><b>Files:</b></p>
<p><a class="el" href="_little_talks_8h.html">./lib/LittleTalks.h</a><br />
 <a class="el" href="_l_t_platform_adapter_8h_source.html">./lib/LTPlatformAdapter.h</a><br />
</p>
<h1><a class="anchor" id="ex1"></a>
Example 1</h1>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_little_talks_8h.html">LittleTalks.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define STR_MAX_LENGTH               50</span></div><div class="line"><span class="preprocessor">#define VARIABLE_NUMBER_TOPIC_ID       0x01</span></div><div class="line"><span class="preprocessor">#define VARIABLE_STRING_TOPIC_ID       0x02</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> OnConnect(LT_DEVICE_ID deviceId)</div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;Connect device %llu\n&quot;</span>, deviceId);</div><div class="line">    fflush(stdout);</div><div class="line">}</div><div class="line"><span class="keywordtype">void</span> OnDisconnect(LT_DEVICE_ID deviceId)</div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;Disconnect device %llu\n&quot;</span>, deviceId);</div><div class="line">    fflush(stdout);</div><div class="line">}</div><div class="line"><span class="keywordtype">void</span> OnSubscribe(LT_DEVICE_ID deviceId, LT_UINT64 topicId)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(topicId == VARIABLE_NUMBER_TOPIC_ID)</div><div class="line">    {</div><div class="line">        printf(<span class="stringliteral">&quot;Subscribe variable number from device %llu\n&quot;</span>, deviceId);</div><div class="line">        fflush(stdout);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(topicId == VARIABLE_STRING_TOPIC_ID)</div><div class="line">    {</div><div class="line">        printf(<span class="stringliteral">&quot;Subscribe variable string from device %llu\n&quot;</span>, deviceId);</div><div class="line">        fflush(stdout);</div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="keywordtype">void</span> OnReceive(LT_DEVICE_ID deviceId, LT_UINT64 topicId, BYTE* value, <span class="keywordtype">int</span> valueSize)</div><div class="line">{</div><div class="line">    UNUSED(valueSize);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(topicId == VARIABLE_NUMBER_TOPIC_ID)</div><div class="line">    {</div><div class="line">        printf(<span class="stringliteral">&quot;Receive variable number %d from device %llu\n&quot;</span>, (<span class="keywordtype">int</span>)*value, deviceId);</div><div class="line">        fflush(stdout);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(topicId == VARIABLE_STRING_TOPIC_ID)</div><div class="line">    {</div><div class="line">        printf(<span class="stringliteral">&quot;Receive variable string \&quot;%s\&quot; from device %llu\n&quot;</span>, (<span class="keywordtype">char</span>*)value,  deviceId);</div><div class="line">        fflush(stdout);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">    UNUSED(argc);</div><div class="line">    UNUSED(argv);</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Example1\n&quot;</span>);</div><div class="line">    fflush(stdout);</div><div class="line"></div><div class="line">    LT_DEVICE_ID thisDeviceUniqueId = (LT_DEVICE_ID)(LTPlatformAdapter_GetIP() % 256);</div><div class="line"></div><div class="line">    <a class="code" href="_little_talks_8h.html#a193a6958e527dcd7e4f7fe6f5feb8b56">LT_Init</a>(thisDeviceUniqueId, OnConnect, OnDisconnect, OnSubscribe, OnReceive);</div><div class="line"></div><div class="line">    <a class="code" href="_little_talks_8h.html#a0c96c16a91112543e0397e8af15464d1">LT_Subscribe</a>(VARIABLE_NUMBER_TOPIC_ID, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line">    <a class="code" href="_little_talks_8h.html#a0c96c16a91112543e0397e8af15464d1">LT_Subscribe</a>(VARIABLE_STRING_TOPIC_ID, STR_MAX_LENGTH);</div><div class="line"></div><div class="line">    <a class="code" href="_little_talks_8h.html#a575e1b143c2b750c6a1e7939312eeac9">LT_Start</a>();</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;This device id: %llu\n&quot;</span>, thisDeviceUniqueId);</div><div class="line">    fflush(stdout);</div><div class="line"></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> randomPeriodMs = 1000 + thisDeviceUniqueId % 1000;</div><div class="line">    srand(randomPeriodMs);</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> iter = 0;</div><div class="line">    <span class="keywordflow">while</span>(iter &lt; 10000000)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> n = iter % 5;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span>(n == 0 || n == 1)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">int</span> variableNum = rand() % 10;</div><div class="line"></div><div class="line">            <a class="code" href="_little_talks_8h.html#a63c15f8be20448ec5775edacb572fe3a">LT_Publish</a>(VARIABLE_NUMBER_TOPIC_ID, (BYTE*)&amp;variableNum, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(n == 2)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">char</span> str[STR_MAX_LENGTH];</div><div class="line">            sprintf(str, <span class="stringliteral">&quot;abcdefg %d&quot;</span>, rand() % 10);</div><div class="line">            <a class="code" href="_little_talks_8h.html#a63c15f8be20448ec5775edacb572fe3a">LT_Publish</a>(VARIABLE_STRING_TOPIC_ID, (BYTE*)str, (LT_UINT16)(strlen(str) + 1));</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(n == 3)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">char</span> str[STR_MAX_LENGTH];</div><div class="line">            sprintf(str, <span class="stringliteral">&quot;XYZ %d&quot;</span>, rand() % 10);</div><div class="line">            <a class="code" href="_little_talks_8h.html#a63c15f8be20448ec5775edacb572fe3a">LT_Publish</a>(VARIABLE_STRING_TOPIC_ID, (BYTE*)str, (LT_UINT16)(strlen(str) + 1));</div><div class="line">        }</div><div class="line"></div><div class="line">        LT_MICROSLEEP(randomPeriodMs * 1000);</div><div class="line"></div><div class="line">        iter++;</div><div class="line">    }</div><div class="line"></div><div class="line">    LT_Uninit();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div></div><!-- fragment --></div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
